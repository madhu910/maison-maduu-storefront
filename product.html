<!DOCTYPE html>
<html lang="en">
<head>
    <style>
        /* ... All CSS is unchanged ... */
    </style>
</head>
<body>
    <script>
        const API_BASE_URL = 'https://maison-maduu-backend.onrender.com';

        function initializePlexusBackground() { /* ... */ }

        document.addEventListener('DOMContentLoaded', async () => {
            initializePlexusBackground();
            const container = document.getElementById('product-detail-container');
            const params = new URLSearchParams(window.location.search);
            const productId = params.get('id');
            
            if (!productId) { /* ... error handling ... */ return; }

            try {
                const response = await fetch(`${API_BASE_URL}/api/products/${productId}`);
                if (!response.ok) throw new Error('Network response was not ok');
                const product = await response.json();
                
                document.title = `${product.title || 'Artifact'} // Maison Maduu & Co.`;
                
                renderProductPage(product);

            } catch (e) { /* ... error handling ... */ }
        });

        function renderProductPage(product) {
            const container = document.getElementById('product-detail-container');
            
            const options = product.options || [];
            // --- THE FIX IS HERE ---
            const variants = product.variants.filter(v => v.is_enabled); // Only use ENABLED variants
            const images = product.images || [];

            const colorOption = options.find(opt => /Color/i.test(opt.name));
            const sizeOption = options.find(opt => /Size/i.test(opt.name));
            
            let optionsHTML = '';
            // ... (The rest of the rendering logic is the same) ...
        }

        function setupEventListeners(product) {
            // ... (This function now also implicitly uses the filtered `variants` from the above scope) ...
        }
    </script>
</body>
</html>
