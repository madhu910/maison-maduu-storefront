<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Loading... // Maison Maduu & Co.</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Sora:wght@400;700&family=Inter:wght@400&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Inter', sans-serif; background-color: #fff; color: #111; margin: 0; }
        .container { max-width: 1000px; margin: 0 auto; padding: 2rem; }
        .product-layout { display: grid; grid-template-columns: 1fr 1fr; gap: 3rem; margin-top: 4rem; }
        .cover-image img { width: 100%; border-radius: 8px; box-shadow: 0 10px 30px rgba(0,0,0,0.1); }
        .product-info h1 { font-family: 'Sora', sans-serif; font-size: 3rem; margin: 0 0 0.5rem 0; }
        .product-info .author { font-size: 1.2rem; color: #555; margin-bottom: 2rem; }
        .product-info .price { font-size: 2.5rem; font-weight: 700; margin-bottom: 2rem; }
        .buy-button { display: inline-block; background-color: #0071e3; color: #fff; text-decoration: none; padding: 1rem 2.5rem; border-radius: 50px; font-weight: 700; transition: background-color 0.3s; }
        .buy-button:hover { background-color: #005bb5; }
        .description { margin-top: 3rem; line-height: 1.8; color: #333; }
    </style>
</head>
<body>
    <div class="container" id="product-page-container">
        <p>Loading product...</p>
    </div>
    <script>
        const API_BASE_URL = 'https://maison-maduu-backend.onrender.com';
        async function renderProductPage() {
            const container = document.getElementById('product-page-container');
            const productId = new URLSearchParams(window.location.search).get('id');
            if (!productId) {
                container.innerHTML = `<p>Error: No product specified.</p>`;
                return;
            }
            try {
                const response = await fetch(`${API_BASE_URL}/api/products/${productId}`);
                const product = await response.json();
                document.title = `${product.title} // Maison Maduu & Co.`;
                container.innerHTML = `
                    <main class="product-layout">
                        <div class="cover-image">
                            <img src="${product.coverImage}" alt="${product.title}">
                        </div>
                        <div class="product-info">
                            <h1>${product.title}</h1>
                            <p class="author">by ${product.author}</p>
                            <p class="price">$${product.price.toFixed(2)}</p>
                            <a href="#" class="buy-button">Buy Now</a>
                            <div class="description">${product.description}</div>
                        </div>
                    </main>
                `;
            } catch (e) {
                container.innerHTML = `<p>Error loading product details.</p>`;
            }
        }
        document.addEventListener('DOMContentLoaded', renderProductPage);
    </script>
</body>
</html>
